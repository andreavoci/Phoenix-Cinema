{"ast":null,"code":"export {};","map":{"version":3,"names":[],"sources":["C:\\Users\\bruno\\Desktop\\Phoenix-Cinema\\front\\src\\app\\user\\user.component.ts"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\r\nimport { User } from '../model/user';\r\nimport { HttpClient } from '@angular/common/http'\r\n\r\n@Component({\r\n  selector: 'app-user',\r\n  template: `\r\n    <div id=\"userDiv\"> \r\n     <br>USERLIST\r\n      <ul>\r\n        \r\n        <li *ngFor=\"let u of users\"> {{u|json}}  --  <button (click)=\"delete(u)\">DELETE</button></li>\r\n        <!-- <li *ngFor=\"let u of users\">{{u[\"id\"]}}: {{u[\"nome\"]}}</li> -->\r\n      </ul>\r\n      <br><br><br>CREATE USER\r\n      <form #userCreate=\"ngForm\" (ngSubmit)=\"create(userCreate.value)\">\r\n        <input type=\"text\" name=\"nome\" ngModel placeholder=\"nome\"><br><br>\r\n        <input type=\"text\" name=\"cognome\" ngModel placeholder=\"cognome\"><br><br>\r\n        <input type=\"text\" name=\"email\" ngModel placeholder=\"email\"><br><br>\r\n        <input type=\"text\" name=\"password\" ngModel placeholder=\"password\"><br><br>\r\n        <button type=\"submit\">Crea utente</button>\r\n\r\n      </form>\r\n      \r\n      <br><br><br>UPDATE USER\r\n      <form #userUpdate=\"ngForm\" (ngSubmit)=\"update(userUpdate.value)\">\r\n        <input type=\"text\" name=\"id\" ngModel placeholder=\"id\"><br><br>\r\n        <input type=\"text\" name=\"servizi\" ngModel placeholder=\"servizi\"><br><br>\r\n        <button type=\"submit\">Aggiorna utente</button>\r\n\r\n      </form>\r\n    </div>\r\n\r\n  `,\r\n  styles: [\r\n    `\r\n    div{\r\n      \r\n    }\r\n  ]\r\n})\r\nexport class UserComponent {\r\n  public users: User[] = [];\r\n  \r\n  private apiServerUrl = 'http://localhost:8080';\r\n\r\n  constructor(private http: HttpClient){ }\r\n\r\n  create(data: any){\r\n    console.log(data)\r\n    this.http.post(this.apiServerUrl+\"/api/users\",data).subscribe(result =>{\r\n      console.log(\"result\",result)\r\n      window.location.reload()\r\n    })\r\n  }\r\n  update(data: any){\r\n    console.log(data)\r\n    console.log(data[\"servizi\"])\r\n    let servizi = data[\"servizi\"].split(\",\");\r\n    data[\"servizi\"]  =servizi;\r\n    console.log(servizi)\r\n    console.log(data)\r\n    this.http.post(this.apiServerUrl+\"/api/users/update\",data).subscribe(result =>{\r\n      console.log(\"result\",result)\r\n      window.location.reload()\r\n    })\r\n  }\r\n\r\n  delete(user:User){\r\n    this.http.delete(this.apiServerUrl+\"/api/users/delete/\"+user.id).subscribe(result =>{\r\n      console.log(\"result\",result)\r\n      window.location.reload()\r\n    })\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.getAll()\r\n  }\r\n  getAll() {\r\n    this.http.get<User[]>(this.apiServerUrl+\"/api/users\").subscribe(result=>{\r\n      this.users = result;\r\n      console.log(result)\r\n    })\r\n  }\r\n\r\n\r\n}\r\n"],"mappings":"AAuFA"},"metadata":{},"sourceType":"module","externalDependencies":[]}